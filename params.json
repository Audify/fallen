{"google":"UA-22300706-1","body":"# Fallen\r\nA simpler daemon library for Ruby processes.\r\n\r\n## Usage\r\n\r\n```\r\nrequire \"fallen\"\r\n\r\nmodule Azazel\r\n  extend Fallen\r\n  \r\n  def self.run\r\n    while running?\r\n      puts \"My name is Legion\"\r\n      sleep 666\r\n    end\r\n  end\r\nend\r\n\r\nAzazel.start!\r\n```\r\n\r\nThis will print _My name is Legion_ every 666 seconds on `STDOUT`. You can stop the daemon by pressing `CTRL+c`.\r\n\r\n## Control your daemon\r\n`Fallen` accepts the following methods:\r\n\r\n* `daemonize!`: detaches the process and keep running it on background;\r\n* `chdir!`: changes the current working directory of the process (useful for log and pid files);\r\n* `pid_file`: allows to indicate a file path where the daemon `PID` will be stored; could be either an absolute path or a relative path to the current working directory (see `chdir!`);\r\n* `stdout`, `stderr` & `stdin`: redirects the process `STDOUT`, `STDERR` and `STDIN` to either an absolute or relative file path; note that when a process is daemonized by default all these streams are redirected to `/dev/null`.\r\n\r\nFor example, the previous example could have the following lines before `Azazel.start!` to store the `PID` and log to a file:\r\n\r\n```\r\nAzazel.pid_file \"/var/run/azazel.pid\"\r\nAzazel.stdout \"/var/log/azazel.log\"\r\nAzazel.daemonize!\r\nAzazel.start!\r\n```\r\n\r\n## CLI support\r\n`Fallen` supports command line parameters, by default using the [`clap`](https://github.com/soveran/clap) gem. In order to enable command line support you need to do the following:\r\n\r\n```\r\nrequire \"fallen\"\r\nrequire \"fallen/cli\"\r\n\r\nmodule Azazel\r\n  extend Fallen\r\n  extend Fallen::CLI\r\n  \r\n  # ...\r\n  \r\n  def usage\r\n    puts \"...\" # Your usage message\r\n    # Default Fallen usage options\r\n    puts fallen_usage\r\n  end\r\nend\r\n\r\ncase Clap.run(ARGV, Azazel.cli).first\r\nwhen \"start\"\r\n  Azazel.start!\r\nwhen \"stop\"\r\n  Azazel.stop!\r\nelse\r\n  Azazel.usage\r\nend\r\n```\r\n\r\n`Azazel.usage` will print the following:\r\n\r\n```\r\nFallen introduced command line arguments:\r\n\r\n  -D    Daemonize this process\r\n  -C    Change directory.\r\n  -P    Path to PID file. Only used in daemonized process.\r\n  -out  Path to redirect STDOUT.\r\n  -err  Path to redirect STDERR.\r\n  -in   Path to redirect STDIN.\r\n```\r\n\r\n## License\r\nSee the `UNLICENSE` file included with this gem distribution.\r\n","note":"Don't delete this file! It's used internally to help with page regeneration.","name":"Fallen","tagline":"A simpler daemon library for Ruby processes."}